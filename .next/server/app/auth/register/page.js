(()=>{var e={};e.id=983,e.ids=[983],e.modules={6330:e=>{"use strict";e.exports=require("@prisma/client")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9551:e=>{"use strict";e.exports=require("url")},4573:e=>{"use strict";e.exports=require("node:buffer")},7598:e=>{"use strict";e.exports=require("node:crypto")},7975:e=>{"use strict";e.exports=require("node:util")},8556:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>c,pages:()=>d,routeModule:()=>f,tree:()=>u});var n=r(260),a=r(8203),o=r(5155),s=r.n(o),l=r(7292),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let u=["",{children:["auth",{children:["register",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9956)),"C:\\Users\\HP\\Desktop\\Projects\\student-resource-centre\\src\\app\\auth\\register\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"C:\\Users\\HP\\Desktop\\Projects\\student-resource-centre\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\HP\\Desktop\\Projects\\student-resource-centre\\src\\app\\auth\\register\\page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/auth/register/page",pathname:"/auth/register",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},1891:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"009eb3d2c3a608d439d0f1ca3d025132a1ad134caa":()=>d,"403405e883b397947a24904729f6e6706cbcfa3ad2":()=>f});var n=r(1590);r(376);var a=r(6500),o=r(6330),s=r(3808),l=r(2385),i=r(9344);let u=new o.PrismaClient;async function d(){try{let e=await u.program.findMany();return console.log("programs:",e),e.map(e=>({id:e.id,name:e.name,code:e.code,duration:e.duration}))}catch(e){throw console.error("Error fetching programs:",e),Error("Failed to fetch programs")}}let c=a.z.object({studentNo:a.z.string().length(10,"Student number must be exactly 10 characters"),email:a.z.string().email(),password:a.z.string().min(6),confirmPassword:a.z.string(),programId:a.z.number()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});async function f(e){console.log("validating"),e.forEach((e,t)=>{console.log(`${t}: ${e}`)});let t=c.safeParse({studentNo:e.get("studentNo"),email:e.get("email"),password:e.get("password"),programId:parseInt(e.get("programId")),confirmPassword:e.get("confirmPassword")});if(console.log("validated fields:",t),!t.success)return{error:t.error.flatten().fieldErrors};let{studentNo:r,email:n,password:a,programId:o}=t.data;try{let e=await (0,s.Rr)(r,n,a,o);return(await (0,l.UL)()).set("session",e.token,{httpOnly:!0,secure:!0,maxAge:604800}),{success:!0}}catch(e){return{error:{general:e.message||"An error occurred"}}}}(0,i.D)([d,f]),(0,n.A)(d,"009eb3d2c3a608d439d0f1ca3d025132a1ad134caa",null),(0,n.A)(f,"403405e883b397947a24904729f6e6706cbcfa3ad2",null)},9404:(e,t,r)=>{Promise.resolve().then(r.bind(r,9956))},5484:(e,t,r)=>{Promise.resolve().then(r.bind(r,4375))},1680:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(8009);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:l="",children:i,iconNode:u,...d},c)=>(0,n.createElement)("svg",{ref:c,...s,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:o("lucide",l),...d},[...u.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(i)?i:[i]])),i=(e,t)=>{let r=(0,n.forwardRef)(({className:r,...s},i)=>(0,n.createElement)(l,{ref:i,iconNode:t,className:o(`lucide-${a(e)}`,r),...s}));return r.displayName=`${e}`,r}},3727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let n=r(8009);function a(e,t){let r=(0,n.useRef)(()=>{}),a=(0,n.useRef)(()=>{});return(0,n.useMemo)(()=>e&&t?n=>{null===n?(r.current(),a.current()):(r.current=o(e,n),a.current=o(t,n))}:e||t,[e,t])}function o(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4055:(e,t,r)=>{"use strict";e.exports=r(8104).vendored.contexts.RouterContext},9015:(e,t,r)=>{"use strict";var n=r(8009),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useState,s=n.useEffect,l=n.useLayoutEffect,i=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),a=n[0].inst,d=n[1];return l(function(){a.value=r,a.getSnapshot=t,u(a)&&d({inst:a})},[e,r,t]),s(function(){return u(a)&&d({inst:a}),e(function(){u(a)&&d({inst:a})})},[e]),i(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},4924:(e,t,r)=>{"use strict";e.exports=r(9015)},4375:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eu});var n=r(5512),a=r(9400),o=r(7722),s=r(2405),l=r(5103),i=r(8009),u=r(6953),d=r(1680);let c=(0,d.A)("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),f=(0,d.A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var m=r(4195),p=/[\\\/_+.#"@\[\(\{&]/,g=/[\\\/_+.#"@\[\(\{&]/g,h=/[\s-]/,v=/[\s-]/g;function b(e){return e.toLowerCase().replace(v," ")}var x=r(7553),w=r(830),y=r(96),N=r(4924),k='[cmdk-group=""]',E='[cmdk-group-items=""]',S='[cmdk-item=""]',j=`${S}:not([aria-disabled="true"])`,C="cmdk-item-select",P="data-value",R=(e,t,r)=>(function(e,t,r){return function e(t,r,n,a,o,s,l){if(s===r.length)return o===t.length?1:.99;var i=`${o},${s}`;if(void 0!==l[i])return l[i];for(var u,d,c,f,m=a.charAt(s),b=n.indexOf(m,o),x=0;b>=0;)(u=e(t,r,n,a,b+1,s+1,l))>x&&(b===o?u*=1:p.test(t.charAt(b-1))?(u*=.8,(c=t.slice(o,b-1).match(g))&&o>0&&(u*=Math.pow(.999,c.length))):h.test(t.charAt(b-1))?(u*=.9,(f=t.slice(o,b-1).match(v))&&o>0&&(u*=Math.pow(.999,f.length))):(u*=.17,o>0&&(u*=Math.pow(.999,b-o))),t.charAt(b)!==r.charAt(s)&&(u*=.9999)),(u<.1&&n.charAt(b-1)===a.charAt(s+1)||a.charAt(s+1)===a.charAt(s)&&n.charAt(b-1)!==a.charAt(s))&&.1*(d=e(t,r,n,a,b+1,s+2,l))>u&&(u=.1*d),u>x&&(x=u),b=n.indexOf(m,b+1);return l[i]=x,x}(e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,t,b(e),b(t),0,0,{})})(e,t,r),A=i.createContext(void 0),M=()=>i.useContext(A),I=i.createContext(void 0),_=()=>i.useContext(I),O=i.createContext(void 0),L=i.forwardRef((e,t)=>{let r=H(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",filtered:{count:0,items:new Map,groups:new Set}}}),n=H(()=>new Set),a=H(()=>new Map),o=H(()=>new Map),s=H(()=>new Set),l=z(e),{label:u,children:d,value:c,onValueChange:f,filter:m,shouldFilter:p,loop:g,disablePointerSelection:h=!1,vimBindings:v=!0,...b}=e,x=(0,y.B)(),N=(0,y.B)(),M=(0,y.B)(),_=i.useRef(null),O=Z();W(()=>{if(void 0!==c){let e=c.trim();r.current.value=e,L.emit()}},[c]),W(()=>{O(6,T)},[]);let L=i.useMemo(()=>({subscribe:e=>(s.current.add(e),()=>s.current.delete(e)),snapshot:()=>r.current,setState:(e,t,n)=>{var a,o,s;if(!Object.is(r.current[e],t)){if(r.current[e]=t,"search"===e)F(),q(),O(1,D);else if("value"===e&&(n||O(5,T),(null==(a=l.current)?void 0:a.value)!==void 0)){null==(s=(o=l.current).onValueChange)||s.call(o,null!=t?t:"");return}L.emit()}},emit:()=>{s.current.forEach(e=>e())}}),[]),U=i.useMemo(()=>({value:(e,t,n)=>{var a;t!==(null==(a=o.current.get(e))?void 0:a.value)&&(o.current.set(e,{value:t,keywords:n}),r.current.filtered.items.set(e,$(t,n)),O(2,()=>{q(),L.emit()}))},item:(e,t)=>(n.current.add(e),t&&(a.current.has(t)?a.current.get(t).add(e):a.current.set(t,new Set([e]))),O(3,()=>{F(),q(),r.current.value||D(),L.emit()}),()=>{o.current.delete(e),n.current.delete(e),r.current.filtered.items.delete(e);let t=G();O(4,()=>{F(),(null==t?void 0:t.getAttribute("id"))===e&&D(),L.emit()})}),group:e=>(a.current.has(e)||a.current.set(e,new Set),()=>{o.current.delete(e),a.current.delete(e)}),filter:()=>l.current.shouldFilter,label:u||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:x,inputId:M,labelId:N,listInnerRef:_}),[]);function $(e,t){var n,a;let o=null!=(a=null==(n=l.current)?void 0:n.filter)?a:R;return e?o(e,r.current.search,t):0}function q(){if(!r.current.search||!1===l.current.shouldFilter)return;let e=r.current.filtered.items,t=[];r.current.filtered.groups.forEach(r=>{let n=a.current.get(r),o=0;n.forEach(t=>{o=Math.max(e.get(t),o)}),t.push([r,o])});let n=_.current;K().sort((t,r)=>{var n,a;let o=t.getAttribute("id"),s=r.getAttribute("id");return(null!=(n=e.get(s))?n:0)-(null!=(a=e.get(o))?a:0)}).forEach(e=>{let t=e.closest(E);t?t.appendChild(e.parentElement===t?e:e.closest(`${E} > *`)):n.appendChild(e.parentElement===n?e:e.closest(`${E} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=_.current)?void 0:t.querySelector(`${k}[${P}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function D(){let e=K().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(P);L.setState("value",t||void 0)}function F(){var e,t,s,i;if(!r.current.search||!1===l.current.shouldFilter){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let u=0;for(let a of n.current){let n=$(null!=(t=null==(e=o.current.get(a))?void 0:e.value)?t:"",null!=(i=null==(s=o.current.get(a))?void 0:s.keywords)?i:[]);r.current.filtered.items.set(a,n),n>0&&u++}for(let[e,t]of a.current)for(let n of t)if(r.current.filtered.items.get(n)>0){r.current.filtered.groups.add(e);break}r.current.filtered.count=u}function T(){var e,t,r;let n=G();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(k))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function G(){var e;return null==(e=_.current)?void 0:e.querySelector(`${S}[aria-selected="true"]`)}function K(){var e;return Array.from((null==(e=_.current)?void 0:e.querySelectorAll(j))||[])}function V(e){let t=K()[e];t&&L.setState("value",t.getAttribute(P))}function B(e){var t;let r=G(),n=K(),a=n.findIndex(e=>e===r),o=n[a+e];null!=(t=l.current)&&t.loop&&(o=a+e<0?n[n.length-1]:a+e===n.length?n[0]:n[a+e]),o&&L.setState("value",o.getAttribute(P))}function Q(e){let t=G(),r=null==t?void 0:t.closest(k),n;for(;r&&!n;)n=null==(r=e>0?function(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}(r,k):function(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}(r,k))?void 0:r.querySelector(j);n?L.setState("value",n.getAttribute(P)):B(e)}let Y=()=>V(K().length-1),ee=e=>{e.preventDefault(),e.metaKey?Y():e.altKey?Q(1):B(1)},et=e=>{e.preventDefault(),e.metaKey?V(0):e.altKey?Q(-1):B(-1)};return i.createElement(w.sG.div,{ref:t,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:e=>{var t;if(null==(t=b.onKeyDown)||t.call(b,e),!e.defaultPrevented)switch(e.key){case"n":case"j":v&&e.ctrlKey&&ee(e);break;case"ArrowDown":ee(e);break;case"p":case"k":v&&e.ctrlKey&&et(e);break;case"ArrowUp":et(e);break;case"Home":e.preventDefault(),V(0);break;case"End":e.preventDefault(),Y();break;case"Enter":if(!e.nativeEvent.isComposing&&229!==e.keyCode){e.preventDefault();let t=G();if(t){let e=new Event(C);t.dispatchEvent(e)}}}}},i.createElement("label",{"cmdk-label":"",htmlFor:U.inputId,id:U.labelId,style:X},u),J(e,e=>i.createElement(I.Provider,{value:L},i.createElement(A.Provider,{value:U},e))))}),U=i.forwardRef((e,t)=>{var r,n;let a=(0,y.B)(),o=i.useRef(null),s=i.useContext(O),l=M(),u=z(e),d=null!=(n=null==(r=u.current)?void 0:r.forceMount)?n:null==s?void 0:s.forceMount;W(()=>{if(!d)return l.item(a,null==s?void 0:s.id)},[d]);let c=B(a,o,[e.value,e.children,o],e.keywords),f=_(),m=V(e=>e.value&&e.value===c.current),p=V(e=>!!d||!1===l.filter()||!e.search||e.filtered.items.get(a)>0);function g(){var e,t;h(),null==(t=(e=u.current).onSelect)||t.call(e,c.current)}function h(){f.setState("value",c.current,!0)}if(i.useEffect(()=>{let t=o.current;if(!(!t||e.disabled))return t.addEventListener(C,g),()=>t.removeEventListener(C,g)},[p,e.onSelect,e.disabled]),!p)return null;let{disabled:v,value:b,onSelect:x,forceMount:N,keywords:k,...E}=e;return i.createElement(w.sG.div,{ref:K([o,t]),...E,id:a,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!m,"data-disabled":!!v,"data-selected":!!m,onPointerMove:v||l.getDisablePointerSelection()?void 0:h,onClick:v?void 0:g},e.children)}),$=i.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:a,...o}=e,s=(0,y.B)(),l=i.useRef(null),u=i.useRef(null),d=(0,y.B)(),c=M(),f=V(e=>!!a||!1===c.filter()||!e.search||e.filtered.groups.has(s));W(()=>c.group(s),[]),B(s,l,[e.value,e.heading,u]);let m=i.useMemo(()=>({id:s,forceMount:a}),[a]);return i.createElement(w.sG.div,{ref:K([l,t]),...o,"cmdk-group":"",role:"presentation",hidden:!f||void 0},r&&i.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:d},r),J(e,e=>i.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?d:void 0},i.createElement(O.Provider,{value:m},e))))}),q=i.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,a=i.useRef(null),o=V(e=>!e.search);return r||o?i.createElement(w.sG.div,{ref:K([a,t]),...n,"cmdk-separator":"",role:"separator"}):null}),D=i.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,a=null!=e.value,o=_(),s=V(e=>e.search),l=V(e=>e.value),u=M(),d=i.useMemo(()=>{var e;let t=null==(e=u.listInnerRef.current)?void 0:e.querySelector(`${S}[${P}="${encodeURIComponent(l)}"]`);return null==t?void 0:t.getAttribute("id")},[]);return i.useEffect(()=>{null!=e.value&&o.setState("search",e.value)},[e.value]),i.createElement(w.sG.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":d,id:u.inputId,type:"text",value:a?e.value:s,onChange:e=>{a||o.setState("search",e.target.value),null==r||r(e.target.value)}})}),F=i.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...a}=e,o=i.useRef(null),s=i.useRef(null),l=M();return i.useEffect(()=>{if(s.current&&o.current){let e=s.current,t=o.current,r,n=new ResizeObserver(()=>{r=requestAnimationFrame(()=>{let r=e.offsetHeight;t.style.setProperty("--cmdk-list-height",r.toFixed(1)+"px")})});return n.observe(e),()=>{cancelAnimationFrame(r),n.unobserve(e)}}},[]),i.createElement(w.sG.div,{ref:K([o,t]),...a,"cmdk-list":"",role:"listbox","aria-label":n,id:l.listId},J(e,e=>i.createElement("div",{ref:K([s,l.listInnerRef]),"cmdk-list-sizer":""},e)))}),T=i.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:o,container:s,...l}=e;return i.createElement(x.bL,{open:r,onOpenChange:n},i.createElement(x.ZL,{container:s},i.createElement(x.hJ,{"cmdk-overlay":"",className:a}),i.createElement(x.UC,{"aria-label":e.label,"cmdk-dialog":"",className:o},i.createElement(L,{ref:t,...l}))))}),G=Object.assign(L,{List:F,Item:U,Input:D,Group:$,Separator:q,Dialog:T,Empty:i.forwardRef((e,t)=>V(e=>0===e.filtered.count)?i.createElement(w.sG.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Loading:i.forwardRef((e,t)=>{let{progress:r,children:n,label:a="Loading...",...o}=e;return i.createElement(w.sG.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},J(e,e=>i.createElement("div",{"aria-hidden":!0},e)))})});function z(e){let t=i.useRef(e);return W(()=>{t.current=e}),t}var W=i.useEffect;function H(e){let t=i.useRef();return void 0===t.current&&(t.current=e()),t}function K(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}function V(e){let t=_(),r=()=>e(t.snapshot());return(0,N.useSyncExternalStore)(t.subscribe,r,r)}function B(e,t,r,n=[]){let a=i.useRef(),o=M();return W(()=>{var s;let l=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():a.current}})(),i=n.map(e=>e.trim());o.value(e,l,i),null==(s=t.current)||s.setAttribute(P,l),a.current=l}),a}var Z=()=>{let[e,t]=i.useState(),r=H(()=>new Map);return W(()=>{r.current.forEach(e=>e()),r.current=new Map},[e]),(e,n)=>{r.current.set(e,n),t({})}};function J({asChild:e,children:t},r){let n;return e&&i.isValidElement(t)?i.cloneElement("function"==typeof(n=t.type)?n(t.props):"render"in n?n.render(t.props):t,{ref:t.ref},r(t.props.children)):r(t)}var X={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};let Q=(0,d.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);r(3134);let Y=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)(G,{ref:r,className:(0,m.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Y.displayName=G.displayName;let ee=i.forwardRef(({className:e,...t},r)=>(0,n.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,n.jsx)(Q,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,n.jsx)(G.Input,{ref:r,className:(0,m.cn)("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));ee.displayName=G.Input.displayName;let et=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)(G.List,{ref:r,className:(0,m.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));et.displayName=G.List.displayName;let er=i.forwardRef((e,t)=>(0,n.jsx)(G.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));er.displayName=G.Empty.displayName;let en=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)(G.Group,{ref:r,className:(0,m.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));en.displayName=G.Group.displayName,i.forwardRef(({className:e,...t},r)=>(0,n.jsx)(G.Separator,{ref:r,className:(0,m.cn)("-mx-1 h-px bg-border",e),...t})).displayName=G.Separator.displayName;let ea=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)(G.Item,{ref:r,className:(0,m.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));ea.displayName=G.Item.displayName;var eo=r(4577),es=r(6248);function el({onSelectAction:e}){let[t,r]=i.useState(!1),[o,s]=i.useState(null),[l,u]=(0,i.useState)([]),[d,p]=(0,i.useState)(null),[g,h]=(0,i.useState)(!0);return(0,n.jsxs)(eo.AM,{open:t,onOpenChange:r,children:[(0,n.jsx)(eo.Wv,{asChild:!0,children:(0,n.jsxs)(a.$,{variant:"outline",role:"combobox","aria-expanded":t,className:"w-[200px] justify-between",children:[o?l.find(e=>e.id===o)?.name:"Select program...",(0,n.jsx)(c,{className:"opacity-50"})]})}),(0,n.jsx)(eo.hl,{className:"w-[200px] p-0",children:(0,n.jsxs)(Y,{children:[(0,n.jsx)(ee,{placeholder:"Select Program...",className:"h-9"}),(0,n.jsxs)(et,{children:[(0,n.jsx)(er,{children:g?"Loading programs...":d||"No programs available."}),(0,n.jsx)(en,{children:l.map(t=>(0,n.jsxs)(ea,{value:t.id.toString(),onSelect:()=>{s(t.id),r(!1),e(t.id)},children:[t.name,(0,n.jsx)(f,{className:(0,m.cn)("ml-auto",o===t.id?"opacity-100":"opacity-0")})]},t.id))})]})]})})]})}es.callServer,es.findSourceMapURL;let ei=(0,es.createServerReference)("403405e883b397947a24904729f6e6706cbcfa3ad2",es.callServer,void 0,es.findSourceMapURL,"registerUser");function eu(){let[e,t]=(0,i.useState)(null),[r,d]=(0,i.useState)(null),c=(0,u.useRouter)();async function f(e){e.preventDefault();let n=new FormData(e.currentTarget);if(null===r){t("Please select a program");return}n.set("programId",r.toString()),console.log("form data entries:",Array.from(n.entries()));let a=await ei(n);a.success?c.push("/student/dashboard"):t("general"in a.errors?a.errors.general:"Registration failed")}return(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen p-8 bg-gray-50 dark:bg-gray-900",children:(0,n.jsxs)("div",{className:"w-full max-w-md bg-white rounded-lg shadow-md p-6 sm:p-8 dark:bg-gray-800",children:[(0,n.jsxs)("div",{className:"text-center mb-6",children:[(0,n.jsx)(l.default,{src:"/file.svg",alt:"Students Resource Centre Logo",width:100,height:100,className:"mx-auto"}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Register"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Register to access your resources."})]}),(0,n.jsxs)("form",{className:"space-y-4",onSubmit:f,children:[e&&(0,n.jsx)("div",{className:"p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg",role:"alert",children:"string"==typeof e?e:"Please fix the highlighted fields."}),(0,n.jsxs)("div",{children:[(0,n.jsx)(s.Label,{htmlFor:"studentNo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Student Number"}),(0,n.jsx)(o.p,{type:"text",id:"studentNo",name:"studentNo",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Student Number",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(s.Label,{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),(0,n.jsx)(o.p,{type:"email",id:"email",name:"email",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Email Address",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(s.Label,{htmlFor:"course",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Course"}),(0,n.jsx)(el,{onSelectAction:d})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(s.Label,{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),(0,n.jsx)(o.p,{type:"password",id:"password",name:"password",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Enter your password",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(s.Label,{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirm Password"}),(0,n.jsx)(o.p,{type:"password",id:"password",name:"confirmPassword",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Confirm your password",required:!0})]}),(0,n.jsx)(a.$,{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-500 dark:hover:bg-blue-600",children:"Register"})]})]})})}},4577:(e,t,r)=>{"use strict";r.d(t,{AM:()=>l,Wv:()=>i,hl:()=>u});var n=r(5512),a=r(8009),o=r(6568),s=r(4195);let l=o.bL,i=o.l9;o.Mz;let u=a.forwardRef(({className:e,align:t="center",sideOffset:r=4,...a},l)=>(0,n.jsx)(o.ZL,{children:(0,n.jsx)(o.UC,{ref:l,align:t,sideOffset:r,className:(0,s.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));u.displayName=o.UC.displayName},9956:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\HP\\\\Desktop\\\\Projects\\\\student-resource-centre\\\\src\\\\app\\\\auth\\\\register\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\HP\\Desktop\\Projects\\student-resource-centre\\src\\app\\auth\\register\\page.tsx","default")},3808:(e,t,r)=>{"use strict";r.d(t,{bS:()=>c,$u:()=>d,Rr:()=>u});var n=r(784);r(2385);let a=require("bcrypt");var o=r.n(a);let s=new(r(6330)).PrismaClient,l=new TextEncoder().encode(process.env.JWT_SECRET);async function i(e){return await new n.P(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("1h").sign(l)}async function u(e,t,r,n){try{let a=await s.student.findFirst({where:{OR:[{studentNo:e},{email:t}]}});if(console.log("trying to get user"),a)return{errors:{general:a.studentNo===e?"Student number is already registered":"Email is already in use"},console:a.studentNo===e};let l=await s.program.findFirst({where:{id:n}});if(!l)return{errorType:"validation",errors:{programId:"Invalid program selected"},console:"Invalid program selected"};console.log("found program:",l),console.log(n),console.log(e),console.log(t);let u=await o().hash(r,10);console.log("hashed");let d=await s.student.create({data:{studentNo:e,email:t,password:u,program:{connect:{id:n}}}});console.log("new student saved:",d);let c=await i({id:d.id,studentNo:d.studentNo});return{success:!0,token:c}}catch(e){return console.error("Registration error:",e),{errors:{general:"Registration failed. Please try again."}}}}async function d(e,t){let r=await s.student.findFirst({where:{studentNo:e}});if(!r)throw Error("User not found");if(!await o().compare(t,r.password))throw Error("Invalid credentials");return{token:await i({id:r.id,studentNo:r.studentNo}),student:r}}async function c(e,t){console.log("authenticating admin");let r=await s.admin.findFirst({where:{email:e}});if(!r)throw Error("User not found");if(!await o().compare(t,r.password))throw Error("Invalid credentials");return{token:await i({id:r.id,email:r.email}),admin:r}}},1412:(e,t,r)=>{"use strict";function n(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}r.d(t,{m:()=>n})},6004:(e,t,r)=>{"use strict";r.d(t,{A:()=>s,q:()=>o});var n=r(8009),a=r(5512);function o(e,t){let r=n.createContext(t),o=e=>{let{children:t,...o}=e,s=n.useMemo(()=>o,Object.values(o));return(0,a.jsx)(r.Provider,{value:s,children:t})};return o.displayName=e+"Provider",[o,function(a){let o=n.useContext(r);if(o)return o;if(void 0!==t)return t;throw Error(`\`${a}\` must be used within \`${e}\``)}]}function s(e,t=[]){let r=[],o=()=>{let t=r.map(e=>n.createContext(e));return function(r){let a=r?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...r,[e]:a}}),[r,a])}};return o.scopeName=e,[function(t,o){let s=n.createContext(o),l=r.length;r=[...r,o];let i=t=>{let{scope:r,children:o,...i}=t,u=r?.[e]?.[l]||s,d=n.useMemo(()=>i,Object.values(i));return(0,a.jsx)(u.Provider,{value:d,children:o})};return i.displayName=t+"Provider",[i,function(r,a){let i=a?.[e]?.[l]||s,u=n.useContext(i);if(u)return u;if(void 0!==o)return o;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=r.reduce((t,{useScope:r,scopeName:n})=>{let a=r(e)[`__scope${n}`];return{...t,...a}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}(o,...t)]}},8060:(e,t,r)=>{"use strict";r.d(t,{C:()=>s});var n=r(8009),a=r(9952),o=r(9397),s=e=>{let{present:t,children:r}=e,s=function(e){var t,r;let[a,s]=n.useState(),i=n.useRef({}),u=n.useRef(e),d=n.useRef("none"),[c,f]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},n.useReducer((e,t)=>r[e][t]??e,t));return n.useEffect(()=>{let e=l(i.current);d.current="mounted"===c?e:"none"},[c]),(0,o.N)(()=>{let t=i.current,r=u.current;if(r!==e){let n=d.current,a=l(t);e?f("MOUNT"):"none"===a||t?.display==="none"?f("UNMOUNT"):r&&n!==a?f("ANIMATION_OUT"):f("UNMOUNT"),u.current=e}},[e,f]),(0,o.N)(()=>{if(a){let e;let t=a.ownerDocument.defaultView??window,r=r=>{let n=l(i.current).includes(r.animationName);if(r.target===a&&n&&(f("ANIMATION_END"),!u.current)){let r=a.style.animationFillMode;a.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===a.style.animationFillMode&&(a.style.animationFillMode=r)})}},n=e=>{e.target===a&&(d.current=l(i.current))};return a.addEventListener("animationstart",n),a.addEventListener("animationcancel",r),a.addEventListener("animationend",r),()=>{t.clearTimeout(e),a.removeEventListener("animationstart",n),a.removeEventListener("animationcancel",r),a.removeEventListener("animationend",r)}}f("ANIMATION_END")},[a,f]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:n.useCallback(e=>{e&&(i.current=getComputedStyle(e)),s(e)},[])}}(t),i="function"==typeof r?r({present:s.isPresent}):n.Children.only(r),u=(0,a.s)(s.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(i));return"function"==typeof r||s.isPresent?n.cloneElement(i,{ref:u}):null};function l(e){return e?.animationName||"none"}s.displayName="Presence"},447:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(8009);function a(e){let t=n.useRef(e);return n.useEffect(()=>{t.current=e}),n.useMemo(()=>(...e)=>t.current?.(...e),[])}},9397:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});var n=r(8009),a=globalThis?.document?n.useLayoutEffect:()=>{}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[989,735,66,10,635,333,757,568,103,706],()=>r(8556));module.exports=n})();