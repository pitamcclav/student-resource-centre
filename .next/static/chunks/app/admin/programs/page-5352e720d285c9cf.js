(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[578],{9629:(e,a,t)=>{Promise.resolve().then(t.bind(t,1420))},1420:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>V});var r=t(5155),s=t(2115),l=t(3312),d=t(1344),n=t(3900),o=t(6195),i=t(652),c=t(1567);let m=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(o.b,{ref:a,className:(0,c.cn)(m(),t),...s})});function f(e){let{onSave:a}=e,[t,o]=(0,s.useState)({name:"",code:"",duration:""}),[i,c]=(0,s.useState)(!1),m=e=>{let{id:a,value:t}=e.target;o(e=>({...e,[a]:t}))},f=async e=>{if(e.preventDefault(),t.name&&t.code&&t.duration)try{c(!0),await a({name:t.name,code:t.code,duration:parseInt(t.duration,10)}),o({name:"",code:"",duration:""})}catch(e){console.error("Failed to save program:",e)}finally{c(!1)}};return(0,r.jsxs)(d.lG,{children:[(0,r.jsx)(d.zM,{asChild:!0,children:(0,r.jsx)(l.$,{variant:"outline",className:"flex items-center px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Add Program"})}),(0,r.jsxs)(d.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(d.c7,{children:[(0,r.jsx)(d.L3,{children:"New Program"}),(0,r.jsx)(d.rr,{children:"Add New Program. Click save when you're done."})]}),(0,r.jsxs)("form",{onSubmit:f,children:[(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(u,{htmlFor:"name",className:"text-right",children:"Name"}),(0,r.jsx)(n.p,{id:"name",value:t.name,onChange:m,className:"col-span-3",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(u,{htmlFor:"code",className:"text-right",children:"Code"}),(0,r.jsx)(n.p,{id:"code",value:t.code,onChange:m,className:"col-span-3",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(u,{htmlFor:"duration",className:"text-right",children:"Duration (years)"}),(0,r.jsx)(n.p,{id:"duration",type:"number",value:t.duration,onChange:m,className:"col-span-3",required:!0})]})]}),(0,r.jsx)(d.Es,{children:(0,r.jsx)(l.$,{type:"submit",children:"Save Program"})})]})]})]})}u.displayName=o.b.displayName;var x=t(6764);let p=e=>{let{program:a,onUpdate:t}=e,[o,i]=(0,s.useState)(!1),[c,m]=(0,s.useState)({name:a.name,code:a.code,duration:a.duration.toString()}),[u,f]=(0,s.useState)(!1),p=e=>{let{id:a,value:t}=e.target;m(e=>({...e,[a]:t}))},h=async e=>{if(e.preventDefault(),c.name&&c.code&&c.duration)try{f(!0),await t(a.id,{name:c.name,code:c.code,duration:parseInt(c.duration,10)}),i(!1)}catch(e){console.error("Failed to update program:",e)}finally{f(!1)}};return(0,r.jsxs)(d.lG,{open:o,onOpenChange:i,children:[(0,r.jsx)(d.zM,{asChild:!0,children:(0,r.jsx)(l.$,{variant:"ghost",className:"text-blue-500 hover:text-blue-700 p-2",children:(0,r.jsx)(x.A,{className:"h-5 w-5"})})}),(0,r.jsxs)(d.Cf,{className:"sm:max-w-md",children:[(0,r.jsx)(d.c7,{children:(0,r.jsx)(d.L3,{children:"Edit Program"})}),(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"name",className:"text-sm font-medium",children:"Program Name"}),(0,r.jsx)(n.p,{id:"name",value:c.name,onChange:p,className:"w-full",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"code",className:"text-sm font-medium",children:"Program Code"}),(0,r.jsx)(n.p,{id:"code",value:c.code,onChange:p,className:"w-full",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"duration",className:"text-sm font-medium",children:"Duration (weeks)"}),(0,r.jsx)(n.p,{id:"duration",type:"number",value:c.duration,onChange:p,className:"w-full",required:!0,min:"1"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>i(!1),disabled:u,children:"Cancel"}),(0,r.jsx)(l.$,{type:"submit",disabled:u,children:u?"Saving...":"Save Changes"})]})]})]})]})};var h=t(3572);let g=h.bL;h.l9;let b=h.ZL,j=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(h.hJ,{className:(0,c.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a})});j.displayName=h.hJ.displayName;let N=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsxs)(b,{children:[(0,r.jsx)(j,{}),(0,r.jsx)(h.UC,{ref:a,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]})});N.displayName=h.UC.displayName;let v=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};v.displayName="AlertDialogHeader";let y=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};y.displayName="AlertDialogFooter";let w=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(h.hE,{ref:a,className:(0,c.cn)("text-lg font-semibold",t),...s})});w.displayName=h.hE.displayName;let C=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(h.VY,{ref:a,className:(0,c.cn)("text-sm text-muted-foreground",t),...s})});C.displayName=h.VY.displayName;let S=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(h.rc,{ref:a,className:(0,c.cn)((0,l.r)(),t),...s})});S.displayName=h.rc.displayName;let k=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(h.ZD,{ref:a,className:(0,c.cn)((0,l.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...s})});k.displayName=h.ZD.displayName;var R=t(5686);let F=e=>{let{program:a,onDelete:t}=e,[d,n]=(0,s.useState)(!1),[o,i]=(0,s.useState)(!1);return(0,r.jsxs)(g,{children:[(0,r.jsx)(h.tv,{asChild:!0,children:(0,r.jsx)(l.$,{variant:"ghost",className:"text-red-500 hover:text-red-700 p-2",children:(0,r.jsx)(R.A,{className:"h-5 w-5"})})}),(0,r.jsxs)(N,{children:[(0,r.jsxs)(v,{children:[(0,r.jsx)(w,{children:"Are you absolutely sure?"}),(0,r.jsxs)(C,{children:['This will permanently delete the program "',a.name,'" (',a.code,"). This action cannot be undone."]})]}),(0,r.jsxs)(y,{children:[(0,r.jsx)(k,{type:"button",onClick:()=>n(!1),children:"Cancel"}),(0,r.jsx)(S,{className:"bg-red-500 hover:bg-red-600",onClick:()=>t(a.id),children:"Delete Program"})]})]})]})},P=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:a,className:(0,c.cn)("w-full caption-bottom text-sm",t),...s})})});P.displayName="Table";let z=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("thead",{ref:a,className:(0,c.cn)("[&_tr]:border-b",t),...s})});z.displayName="TableHeader";let D=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tbody",{ref:a,className:(0,c.cn)("[&_tr:last-child]:border-0",t),...s})});D.displayName="TableBody",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tfoot",{ref:a,className:(0,c.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s})}).displayName="TableFooter";let L=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tr",{ref:a,className:(0,c.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s})});L.displayName="TableRow";let _=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("th",{ref:a,className:(0,c.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})});_.displayName="TableHead";let E=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("td",{ref:a,className:(0,c.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})});E.displayName="TableCell";let A=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("caption",{ref:a,className:(0,c.cn)("mt-4 text-sm text-muted-foreground",t),...s})});A.displayName="TableCaption";var T=t(5828);let U=(0,T.createServerReference)("40c30ad529826d855aa0f4ff34e88823dfd459ce82",T.callServer,void 0,T.findSourceMapURL,"getPrograms"),$=(0,T.createServerReference)("4018d6ea0ba7cf7d8bbbf9321d2cafd34e0b64ad31",T.callServer,void 0,T.findSourceMapURL,"saveProgram"),M=(0,T.createServerReference)("60cf02a8bdb0761cfb276abdf436720be179b06ad5",T.callServer,void 0,T.findSourceMapURL,"updateProgram"),q=(0,T.createServerReference)("40fe00409c8995953620122ffef86ff2895f191adc",T.callServer,void 0,T.findSourceMapURL,"deleteProgram");function V(){let[e,a]=(0,s.useState)([]),[t,l]=(0,s.useState)(!0),[d,o]=(0,s.useState)(null),[i,c]=(0,s.useState)(!1),[m,u]=(0,s.useState)(null),[x,h]=(0,s.useState)(""),[g,b]=(0,s.useState)(null);(0,s.useEffect)(()=>{j()},[x]);let j=async()=>{try{l(!0);let e=await U(x);a(e),o(null)}catch(e){o("Failed to fetch programs"),console.error("Error fetching programs:",e)}finally{l(!1)}},N=async e=>{try{await $(e),await j()}catch(e){console.error("Failed to save program:",e),o("Failed to save program")}},v=async(e,a)=>{try{await M(e,a),await j()}catch(e){console.error("Failed to update program:",e),o("Failed to update program")}},y=async e=>{try{await q(e),await j(),c(!1),u(null)}catch(e){console.error("Failed to delete program:",e),o("Failed to delete program")}},w=e=>{b(a=>(null==a?void 0:a.key)===e?{key:e,direction:"asc"===a.direction?"desc":"asc"}:{key:e,direction:"asc"})},C=[...e].sort((e,a)=>{if(!g)return 0;let t=e[g.key],r=a[g.key];return t<r?"asc"===g.direction?-1:1:t>r?"asc"===g.direction?1:-1:0});return t?(0,r.jsx)("div",{className:"flex-1 overflow-auto p-8",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("div",{className:"text-gray-500",children:"Loading programs..."})})}):d?(0,r.jsx)("div",{className:"flex-1 overflow-auto p-8",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("div",{className:"text-red-500",children:d})})}):(0,r.jsx)("div",{className:"flex-1 overflow-auto p-8",children:(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-lg font-semibold text-gray-800",children:"Programs"}),(0,r.jsx)(f,{onSave:N})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(n.p,{type:"search",placeholder:"Search programs...",value:x,onChange:e=>h(e.target.value),className:"max-w-sm"})}),d&&(0,r.jsx)("div",{className:"mb-4 p-4 bg-red-50 text-red-500 rounded",children:d}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)(P,{className:"w-full mt-4 border border-gray-200 rounded-lg shadow-sm [&_td]:border-l [&_th]:border-l",children:[(0,r.jsx)(A,{children:"List of all programs"}),(0,r.jsx)(z,{children:(0,r.jsxs)(L,{children:[(0,r.jsxs)(_,{className:"font-semibold cursor-pointer hover:bg-gray-50",onClick:()=>w("name"),children:["Name ",(null==g?void 0:g.key)==="name"&&("asc"===g.direction?"↑":"↓")]}),(0,r.jsxs)(_,{className:"font-semibold cursor-pointer hover:bg-gray-50",onClick:()=>w("code"),children:["Code ",(null==g?void 0:g.key)==="code"&&("asc"===g.direction?"↑":"↓")]}),(0,r.jsxs)(_,{className:"font-semibold cursor-pointer hover:bg-gray-50",onClick:()=>w("duration"),children:["Duration ",(null==g?void 0:g.key)==="duration"&&("asc"===g.direction?"↑":"↓")]}),(0,r.jsx)(_,{className:"font-semibold",children:"Actions"})]})}),(0,r.jsxs)(D,{children:[C.map(e=>(0,r.jsxs)(L,{children:[(0,r.jsx)(E,{children:e.name}),(0,r.jsx)(E,{children:e.code}),(0,r.jsxs)(E,{children:[e.duration," years"]}),(0,r.jsx)(E,{children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(p,{program:e,onUpdate:v}),(0,r.jsx)(F,{program:e,onDelete:y})]})})]},e.id)),0===C.length&&(0,r.jsx)(L,{children:(0,r.jsx)(E,{colSpan:4,className:"text-center text-gray-500",children:"No programs found"})})]})]})})]})})}},3312:(e,a,t)=>{"use strict";t.d(a,{$:()=>i,r:()=>o});var r=t(5155),s=t(2115),l=t(2317),d=t(652),n=t(1567);let o=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,a)=>{let{className:t,variant:s,size:d,asChild:i=!1,...c}=e,m=i?l.DX:"button";return(0,r.jsx)(m,{className:(0,n.cn)(o({variant:s,size:d,className:t})),ref:a,...c})});i.displayName="Button"},1344:(e,a,t)=>{"use strict";t.d(a,{Cf:()=>u,Es:()=>x,L3:()=>p,c7:()=>f,lG:()=>o,rr:()=>h,zM:()=>i});var r=t(5155),s=t(2115),l=t(6217),d=t(767),n=t(1567);let o=l.bL,i=l.l9,c=l.ZL;l.bm;let m=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.hJ,{ref:a,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});m.displayName=l.hJ.displayName;let u=s.forwardRef((e,a)=>{let{className:t,children:s,...o}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)(l.UC,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[s,(0,r.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(d.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=l.UC.displayName;let f=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};f.displayName="DialogHeader";let x=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};x.displayName="DialogFooter";let p=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.hE,{ref:a,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});p.displayName=l.hE.displayName;let h=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.VY,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});h.displayName=l.VY.displayName},3900:(e,a,t)=>{"use strict";t.d(a,{p:()=>d});var r=t(5155),s=t(2115),l=t(1567);let d=s.forwardRef((e,a)=>{let{className:t,type:s,...d}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...d})});d.displayName="Input"},1567:(e,a,t)=>{"use strict";t.d(a,{cn:()=>l});var r=t(3463),s=t(9795);function l(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,r.$)(a))}}},e=>{var a=a=>e(e.s=a);e.O(0,[780,749,161,203,441,517,358],()=>a(9629)),_N_E=e.O()}]);